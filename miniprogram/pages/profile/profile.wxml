<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="profile-card">
    <view class="profile-header gradient-bg">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-info">
        <text class="username">{{userInfo.nickName || 'æ©±çª—çŒäºº'}}</text>
        <text class="user-id">ID: {{userInfo.id || '123456'}}</text>
      </view>
      <button wx:if="{{!hasUserInfo}}" class="login-btn" bindtap="login">ç™»å½•</button>
    </view>

    <!-- å¥½è¿å€¼ -->
    <view class="lucky-section">
      <view class="lucky-card">
        <text class="lucky-icon">âœ¨</text>
        <view class="lucky-info">
          <text class="lucky-value">{{luckyValue}}</text>
          <text class="lucky-label">å¥½è¿å€¼</text>
        </view>
      </view>

      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-number">{{exploredCount}}</text>
          <text class="stat-label">å·²æ¢ç´¢</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{capturedCount}}</text>
          <text class="stat-label">å·²æ•è·</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{achievementCount}}</text>
          <text class="stat-label">æˆå°±</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„åŠŸèƒ½ -->
  <view class="menu-section">
    <text class="section-title">æˆ‘çš„åŠŸèƒ½</text>

    <view class="menu-list card">
      <view class="menu-item" bindtap="goToPage" data-url="/pages/collection/collection">
        <view class="menu-left">
          <text class="menu-icon">ğŸ¨</text>
          <text class="menu-name">æˆ‘çš„å›¾é‰´</text>
        </view>
        <view class="menu-right">
          <text class="menu-badge" wx:if="{{collectionCount > 0}}">{{collectionCount}}</text>
          <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
        </view>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/routes/routes">
        <view class="menu-left">
          <text class="menu-icon">ğŸ—ºï¸</text>
          <text class="menu-name">æˆ‘çš„è·¯çº¿</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/achievements/achievements">
        <view class="menu-left">
          <text class="menu-icon">ğŸ†</text>
          <text class="menu-name">æˆ‘çš„æˆå°±</text>
        </view>
        <view class="menu-right">
          <text class="menu-badge" wx:if="{{achievementCount > 0}}">{{achievementCount}}</text>
          <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
        </view>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/favorites/favorites">
        <view class="menu-left">
          <text class="menu-icon">â­</text>
          <text class="menu-name">æˆ‘çš„æ”¶è—</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- æ›´å¤šæœåŠ¡ -->
  <view class="menu-section">
    <text class="section-title">æ›´å¤šæœåŠ¡</text>

    <view class="menu-list card">
      <view class="menu-item" bindtap="goToPage" data-url="/pages/invite/invite">
        <view class="menu-left">
          <text class="menu-icon">ğŸ‘¥</text>
          <text class="menu-name">é‚€è¯·å¥½å‹</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/feedback/feedback">
        <view class="menu-left">
          <text class="menu-icon">ğŸ’¬</text>
          <text class="menu-name">æ„è§åé¦ˆ</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/about/about">
        <view class="menu-left">
          <text class="menu-icon">â„¹ï¸</text>
          <text class="menu-name">å…³äºæˆ‘ä»¬</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>

      <view class="menu-item" bindtap="goToPage" data-url="/pages/settings/settings">
        <view class="menu-left">
          <text class="menu-icon">âš™ï¸</text>
          <text class="menu-name">è®¾ç½®</text>
        </view>
        <image class="menu-arrow" src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- æœ¬å‘¨æ•°æ® -->
  <view class="stats-section">
    <text class="section-title">æœ¬å‘¨æ•°æ®</text>

    <view class="stats-grid card">
      <view class="stats-item">
        <text class="stats-icon">ğŸ¯</text>
        <text class="stats-number">{{weekStats.explored}}</text>
        <text class="stats-label">æ¢ç´¢æ©±çª—</text>
      </view>
      <view class="stats-item">
        <text class="stats-icon">ğŸš¶</text>
        <text class="stats-number">{{weekStats.distance}}km</text>
        <text class="stats-label">è¡Œèµ°è·ç¦»</text>
      </view>
      <view class="stats-item">
        <text class="stats-icon">âœ¨</text>
        <text class="stats-number">+{{weekStats.lucky}}</text>
        <text class="stats-label">å¥½è¿å€¼</text>
      </view>
      <view class="stats-item">
        <text class="stats-icon">ğŸ¨</text>
        <text class="stats-number">{{weekStats.species}}</text>
        <text class="stats-label">æ•è·ç‰©ç§</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view wx:if="{{hasUserInfo}}" class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>
</view>
