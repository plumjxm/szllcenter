那我直接给你一份「可以拿去开会/评审/拆任务」的 PRD 完整版。
默认对象是：**后端 Go + Web/Vue 管理端 + 原生 iOS/Android + 小程序** 的 V1 版本。

你可以复制整份文档到你自己的知识库 / Confluence / 飞书文档里。

---

# 数字邻里中心平台 V1.0 产品需求文档（PRD）

> 版本：V1.0（MVP）
> 产品负责人：
> 文档用途：对齐业务目标、体验路径和各端功能范围，作为设计/开发/测试的需求依据。

---

## 1. 背景与目标

### 1.1 业务背景

* 「壹声在场」希望通过数字化平台，把城市中的商家、公共空间、IP 内容串联成 **数字邻里中心**。
* 当前问题：

  * 商家获客、留存依赖平台补贴或单次活动，缺少长期运营工具；
  * 家庭、青年用户缺乏“有仪式感”的城市探索路径；
  * 线下空间资产（街区、商圈、小店）被低频、碎片化利用。
* 解决思路：

  * 以「橱窗狩猎」为核心体验，将城市空间抽象为“橱窗 + 任务 + 权益”；
  * 让用户通过 App/小程序在城市中完成任务、捕获数字物种、获取权益；
  * 让运营与商家通过管理端配置橱窗、任务、路线，并看数据。

### 1.2 产品定位

* **产品名（工作名）：** 数字邻里中心平台
* **形态：**

  * C 端：原生 App（iOS / Android）、小程序
  * B/运营端：Web/Vue 管理端
  * 服务端：Go 语言后端服务
* **一句话：**

  > “让城市变成可以打卡、收集、获得好运的数字邻里中心。”

### 1.3 V1.0 业务目标（MVP）

* 打通一条完整链路：
  「用户进入 → 发现橱窗 → 到店完成任务 → 获得数字物种/卡券 → 商家核销 → 运营看得到效果」。
* 支持 **1 城市 + 若干橱窗 + 1–2 个主题活动** 的实际落地。
* 提供基本但可用的运营配置能力：橱窗、任务、券、路线、活动配置。

### 1.4 成功指标（KPI 粗颗粒）

> 后续可细化到数据团队，这里作为产品验收参考。

* 用户侧：

  * 至少 X 人完成 ≥1 次橱窗任务（活动期）；
  * 单用户平均参与橱窗数 ≥ 2。
* 商家侧：

  * 参与商家 ≥ N 家；
  * 参与商家中 ≥ 60% 有实际任务参与数据（有人来过）。
* 运营侧：

  * 能从管理端导出城市/橱窗/路线维度的基础数据报表。

---

## 2. 用户 & 角色

### 2.1 用户角色

1. **城市玩家（普通用户）**

   * 家庭亲子、年轻人、城市探索者；
   * 使用 App / 小程序，寻找好玩的路线和橱窗，打卡、做任务、拿福利。

2. **商家主理人**

   * 社区小店、特色店、餐饮店；
   * 通过平台参与项目，被引流，使用券核销能力，看到自己大概数据。

3. **城市运营/品牌运营**

   * 负责城市项目整体设计和执行；
   * 通过管理端配置橱窗、任务、券、路线和活动内容，并查看报表。

4. **平台管理员**

   * 管平台所有城市与账号，做权限管理、问题排查。

### 2.2 典型场景（摘要）

* S1：家庭周末城市探险：
  打开 App → 看到城市活动 → 选择一条亲子路线 → 实地按路线完成多个橱窗任务 → 收集数字物种和卡券 → 去商家消费。
* S2：商家参与活动：
  运营拉商家入驻 → 填写基本信息 → 平台配置一个“到店打卡 + 发券”的任务 → 活动期间获取任务数据和券核销数据。
* S3：运营做复盘：
  活动结束，通过管理端导出数据 → 分析哪个橱窗参与多、哪个路线完赛率高 → 复用成下一次活动模板。

---

## 3. 核心用户流程（高层）

### 3.1 C 端主流程（用户）

1. 进入（App/小程序，扫码或直接打开）
2. 授权定位、选择城市
3. 浏览附近橱窗或推荐路线
4. 进入橱窗详情 → 查看任务 → 前往线下
5. 到店后开始任务 → 完成任务 → 获得数字物种/卡券
6. 去店内消费 → 出示券 → 商家核销
7. 用户在图鉴 / 卡券包中看到成果；运营方后台看到数据。

> 约束：用户从首次进入到完成**第一个任务**，操作步骤 ≤ 7 步。

### 3.2 B/运营端主流程（管理端）

1. 创建城市项目
2. 导入/创建商家与橱窗
3. 配置任务 & 券 & 路线
4. 项目上线后实时查看参与数据
5. 活动结束后导出报表做复盘

---

## 4. 功能需求总览（模块 x 端）

### 4.1 模块列表

1. 账号与身份模块
2. 橱窗 & 商家模块
3. 任务 & 打卡模块
4. 数字物种 & 图鉴模块
5. 卡券 & 权益模块
6. 路线 & 活动模块
7. 消息 & 通知模块（简版）
8. 数据报表模块
9. 系统配置 & 权限模块

### 4.2 功能矩阵（按端）

| 模块        | 后端 Go | Web/Vue 管理端 | App iOS/Android | 小程序       |
| --------- | ----- | ----------- | --------------- | --------- |
| 账号与身份     | ✔     | 登录/账号管理     | 登录/我的           | 登录        |
| 橱窗 & 商家   | ✔     | 配置/管理       | 浏览/详情           | 浏览/详情     |
| 任务 & 打卡   | ✔     | 配置/查看数据     | 做任务/打卡          | 做任务/打卡    |
| 数字物种 & 图鉴 | ✔     | 配置物种（可后置）   | 图鉴展示            | 图鉴简版（可后置） |
| 卡券 & 权益   | ✔     | 模板配置/统计     | 卡券包/核销展示        | 卡券包/核销    |
| 路线 & 活动   | ✔     | 配置活动/路线     | 浏览路线/进度         | 浏览路线/简进度  |
| 消息 & 通知   | ✔     | 配置部分运营消息    | 消息中心            | 系统提醒      |
| 数据报表      | ✔     | 报表 & 导出     | -               | -         |
| 系统配置 & 权限 | ✔     | 权限/城市项目     | -               | -         |

---

## 5. 详细功能需求（FRD）

> 用「用户故事 + 说明 + 验收标准」方式整理。
> 优先级：P0 = 必须，P1 = 应有，P2 = 可选/延后。

### 5.1 账号与身份模块

**FR-1 用户登录/注册（C 端）**

* 用户故事：

  * 作为普通用户，我希望用手机号或平台账号快速登录，以便保存我的任务记录和卡券。
* 需求说明：

  * App：支持手机号 + 验证码登录；支持游客模式浏览（未登录可看地图/详情，开始任务或领取券前引导登录）。
  * 小程序：支持微信授权登录；未授权只能浏览部分内容。
* 优先级：P0
* 验收标准：

  * 验证码发送有频控（如 60s 一次）；
  * 登录成功后，用户信息和 Token 本地保存，重启仍保持登录状态；
  * 未登录尝试开始任务/领取券时，弹出登录引导。

**FR-2 身份角色（运营/商家/管理员）**

* 用户故事：
  作为运营，我登录管理端后，只能看到我有权限的城市和功能。
* 需求说明：

  * 角色类型：超级管理员、城市运营、数据查看、商家账号（可后置）；
  * 菜单和接口按角色控制。
* 优先级：P0
* 验收标准：

  * 不同角色登录管理端，看到的菜单明显不同；
  * 非授权访问接口返回统一错误码。

---

### 5.2 橱窗 & 商家模块

**FR-3 商家信息管理（管理端）**

* 用户故事：
  作为城市运营，我需要录入和管理参与活动的商家信息。
* 需求说明：

  * 商家字段：名称、地址、联系人、电话、所属城市项目、状态；
  * 支持新增/编辑/启用/禁用；
  * 列表支持按城市项目筛选。
* 端：Web 管理端 + 后端
* 优先级：P0
* 验收标准：

  * 新建商家后，可在橱窗配置中被选择；
  * 禁用商家的橱窗在 C 端不再展示。

**FR-4 橱窗配置（管理端）**

* 用户故事：
  作为运营，我希望为某商家创建一个可展示在地图上的“橱窗”。
* 需求说明：

  * 橱窗字段：名称、封面图、简介、关联商家、经纬度、地址、营业时间、IP 标签、状态（草稿/上线/下线）；
  * 支持在地图上选点或输入地址定位；
  * 一个商家可配置多个橱窗（如主门、侧门、主题点位）。
* 端：Web 管理端 + 后端
* 优先级：P0
* 验收标准：

  * 上线的橱窗在 App/小程序地图和列表中可见；
  * 下线的橱窗在 C 端不可见，但数据仍保存。

**FR-5 附近橱窗展示（App/小程序）**

* 用户故事：

  * 作为用户，我打开 App 可以看到附近有哪些橱窗可玩。
* 需求说明：

  * 通过定位获取用户当前城市和经纬度；
  * 显示附近橱窗列表（按距离排序）+ 地图点位；
  * 支持手动选择城市（避免定位不准）。
* 端：App、小程序 + 后端
* 优先级：P0
* 验收标准：

  * 定位正常时，3 秒内返回至少一批附近橱窗（在有配置数据的区域）；
  * 无数据时展示“当前区域暂未开放”的友好提示。

---

### 5.3 任务 & 打卡模块

**FR-6 任务配置（管理端）**

* 用户故事：

  * 作为运营，我希望为某个橱窗配置到店任务并设置奖励。
* 需求说明：

  * 任务字段：名称、类型（V1 先支持“到店打卡”）、关联橱窗、有效期、描述文案、奖励配置（数字物种/卡券）、可参与次数（每人/每天/活动期）。
* 端：管理端 + 后端
* 优先级：P0
* 验收标准：

  * 配置完成的任务出现在对应橱窗详情页；
  * 过期任务在 C 端显示为“活动已结束”。

**FR-7 任务开始与完成（App/小程序）**

* 用户故事：

  * 作为用户，我在橱窗现场点击“开始任务”，系统确认我已到店，并在完成后给予奖励。
* 需求说明：

  * 到店判定：定位范围内（如半径 X 米）才允许开始任务；
  * 任务执行流程 V1 简化为“确认到达 → 完成”，后续再支持复杂交互；
  * 一次任务完成后记录状态，不允许无限重复。
* 端：App、小程序 + 后端
* 优先级：P0
* 验收标准：

  * 不在指定范围内时，前端提示“离橱窗太远，无法开始任务”；
  * 完成任务后，任务状态更新为已完成，奖励立刻到账。

---

### 5.4 数字物种 & 图鉴模块

**FR-8 数字物种配置（管理端）**

* 用户故事：

  * 作为品牌内容方，我需要配置不同的数字物种，并关联到任务。
* 需求说明：

  * 字段：名称、图标、描述文案、所属 IP、稀有度；
  * 管理端可增删改。
* 端：管理端 + 后端
* 优先级：P1（非必须，若暂时不用可退化为简单“积分/好运值”）

**FR-9 用户图鉴展示（App）**

* 用户故事：

  * 作为用户，我希望看到我收集到哪些数字物种，形成“成就感”。
* 需求说明：

  * 图鉴列表：已获得和未获得（灰显）；
  * 详情页：物种故事、获得方式。
* 端：App + 后端
* 优先级：P1
* 验收标准：

  * 完成任务时若获得新物种，有明显提示；
  * 图鉴中显示该物种已解锁，记录时间。

---

### 5.5 卡券 & 权益模块

**FR-10 券模板配置（管理端）**

* 用户故事：

  * 作为运营，我希望配置不同门店/活动的券模板。
* 需求说明：

  * 字段：名称、类型（代金、折扣）、面值/折扣、门槛金额、适用商家/橱窗、有效期、使用规则。
* 端：管理端 + 后端
* 优先级：P0

**FR-11 发券与卡券包（App/小程序）**

* 用户故事：

  * 作为用户，我完成任务后希望拿到对应券，并在“卡券包”中看到。
* 需求说明：

  * 任务完成成功 → 调用后端发券 → 用户卡券包增加一张券；
  * 卡券包列表按状态分：未使用/已使用/已过期；
  * 券详情页展示规则、有效期、核销码。
* 端：App、小程序 + 后端
* 优先级：P0
* 验收标准：

  * 发券成功后，列表刷新可见；
  * 过期时间到了后，券自动变为“已过期”。

**FR-12 商家核销**

* 用户故事：

  * 作为商家，我在用户消费时需要验证券是否有效并完成核销。
* 需求说明：

  * 方式：用户出示二维码/数字码 → 商家使用管理端或简单 H5 工具核销；
  * 核销成功后，券状态变为“已使用”。
* 端：管理端/H5 + 后端 + C 端展示
* 优先级：P0
* 验收标准：

  * 核销后 10 秒内，C 端券状态更新；
  * 重复核销时有明显错误提示。

---

### 5.6 路线 & 活动模块

**FR-13 活动配置（管理端）**

* 用户故事：

  * 作为城市运营，我要为某城市项目配置一个主题活动。
* 需求说明：

  * 字段：活动名称、时间范围、城市项目、主视觉、简介、关联路线；
* 优先级：P1

**FR-14 路线配置与展示**

* 管理端：

  * 配置路线：名称、适合人群、预计时长、包含橱窗列表及顺序；
* C 端：

  * 路线列表：卡片展示；
  * 详情页显示橱窗列表及用户完成进度。
* 优先级：

  * 管理端配置：P1
  * C 端展示：App P1，小程序 P2（可延后）

---

### 5.7 消息 & 通知模块

**FR-15 系统消息**

* 用户故事：

  * 作为用户，我希望收到任务完成、券即将过期等提醒。
* 需求说明：

  * 消息类型：任务完成提醒、券即将过期提醒、新活动通知；
  * 展现：App 消息列表，小程序可做简单提示；推送可先做或后补。
* 优先级：P2（可后续再做）

---

### 5.8 数据报表模块

**FR-16 橱窗/路线/活动数据看板**

* 用户故事：

  * 作为运营，我希望看到每个橱窗、每条路线的参与情况。
* 需求说明：

  * 维度：

    * 橱窗：曝光量（详情页访问）、任务参与人数、完成率、券发放/核销数；
    * 路线：参与人数、完成路线用户数；
    * 活动：整体参与情况汇总。
  * 支持导出 CSV。
* 优先级：P1
* 验收标准：

  * 指标定义清晰且与前端埋点一致；
  * 导出文件字段齐全，无显著性能问题。

---

## 6. 非功能性需求

### 6.1 性能

* 首页/附近橱窗接口：

  * 在橱窗量中等（几千级）场景下，响应时间 ≤ 1s（不含网络）。
* 任务完成 & 发券：

  * 接口响应时间 ≤ 2s（正常网络情况下）。
* 并发能力：

  * V1 可按单城市几百并发设计，预留水平扩展方案。

### 6.2 可用性

* 关键路径（登录、打开橱窗详情、任务开始/完成、券核销）整体成功率 ≥ 95%。
* 各种失败场景要有可理解的错误提示（网络问题、活动结束、定位失败等）。

### 6.3 安全与隐私

* Token 安全存储、接口鉴权；
* 用户位置仅用于提供服务，不在前端/日志明文暴露；
* 管理端操作有基础日志（谁在什么时间做了什么修改）。

---

## 7. 范围说明 & 版本规划

### 7.1 本次 V1.0 范围（P0）

* 账号登录（C 端 + 管理端）；
* 城市项目 / 商家 / 橱窗配置；
* 附近橱窗展示（App、小程序基本能力）；
* 单一任务类型的任务配置 & 执行（到店打卡）；
* 卡券模板配置、发券、卡券包、核销；
* 基础数据采集与简单报表（核心指标）；

### 7.2 后续迭代优先方向（P1/P2）

* 路线玩法 / 多任务组合；
* 图鉴与数字物种体系；
* 更丰富的任务类型（答题、拍照上传等）；
* 更完整的数据看板与运营工具；
* 消息通知体系与精细化运营能力。

---

## 8. 依赖与风险

* 依赖：

  * 地图/LBS、短信/推送、对象存储、支付（若有交易）；
  * 线下商家执行力（是否愿意配合活动和核销流程）。
* 风险：

  * MVP 范围若不断膨胀，会影响首城落地时间；
  * 线下体验质量不受平台完全控制，需要运营规范 & 培训。

---

到这里，这份就是一份比较完整的 **V1 需求文档** 了，可以直接：

* 给设计：按核心流程 & 页面，做交互稿；
* 给后端：结合我们之前的整体架构，开始做领域建模 & API 草案；
* 给前端：按模块 & 端的功能矩阵拆 Sprint。

如果你愿意，下一步我可以基于这份 PRD，再分别输出一份：

* 《后端接口列表草案（按模块）》
* 或《关键页面的文字版原型（首页 / 橱窗详情 / 任务流程 / 卡券包）》

你只要告诉我：**先细化接口** 还是 **先细化页面原型**，我就直接往下写。
